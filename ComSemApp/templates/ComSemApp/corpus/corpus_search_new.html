<!--
author: Trevor Greenside
-->

{% extends 'ComSemApp/sidebar.html' %}

{% block content %}

<!-- Page-Title -->
<div class="row">
	<div class="col-sm-12">
		<div class="page-title-box">
			<h4 class="page-title">
				Corpus Search
			</h4>
			<div class="clearfix"></div>
		</div>
	</div>
</div>

<!-- search criteria -->
<div class="row">

	<!-- left most column -->
	<div class="col-lg-4">

		<!-- Space for user to enter the first word, mandatory -->
		<div class="form-group">
			<label for="word1">Enter a Word</label>
			<input type="text" class="form-control input-sm" id="word1" name="word1" placeholder="Type a word to search">
		</div>
		<!-- Space for user to select a part of speech tag for word 1 -->
		<div class="form-group">
			<label for="new_tag">Select Part-of-Speech Tag</label>
			<select class="form-control input-sm" id="new_tag" name="new_tag">
				<option selected="selected" value="ALL">Full Tagset</option>
				{% for tag in tags %}
				<option value="{{ tag }}">{{ tag }}</option>
				{% endfor %}
			</select>
		</div>

	</div>

	<!-- middle column -->
	<div class="col-lg-4">
		<div class="form-group">
			<label for="new_word">Enter a Second Word (Optional)</label>
			<input type="text" class="form-control input-sm" id="word2" name="word2" placeholder="Type another word (optional)">
		</div>
		<!-- Space for user to enter the second word, optional. Will not be processed if blank -->
		<div class="form-group">
			<label for="new_tag">Select Part-of-Speech Tag</label>
			<select class="form-control input-sm" id="new_tag" name="new_tag">
				<option selected="selected" value="ALL">Full Tagset</option>
				{% for tag in tags %}
				<option value="{{ tag }}">{{ tag }}</option>
				{% endfor %}
			</select>
		</div>
	</div>

	<div class="col-lg-2">
		<br>

		<!-- submit button -->
		<button class="btn btn-sm btn-outline-success pull-right" type="submit">
		    <span>Search <i class="ti-angle-right"></i></span>
		</button>

		<br><br><br>
		<!-- user specifies offset for the corpus search -->
		<label for="newOffset">Select Offset</label>
		<select id="newOffset" name="addOffset">
			{% for i in offsetRange %}
				{% if i == 0 %}
					<option value="{{ i }}" selected>{{ i }}</option>
				{% else %}
					<option value="{{ i }}" >{{ i }}</option>
				{% endif %}
			{% endfor %}
		</select>
		<!-- <input class="form-control input-sm" type="number" min="-5" max="8" value="1" id="newOffset" name="addOffset"> -->
		<!--
		<input class="form-control input-sm" type="range" min="-5" max="5" value="0" id="newOffset"
			name="addOffset" step="1" list="steplist" onchange="updateTextInput(this.value);">
			<datalist id="steplist">
			    <option value="0">0</option>
			    <option>5</option>
			    <option>-5</option>
			</datalist>
		<input type="text" id="textInput" value="0" -->
	</div>


</div>

<!-- results -->
<br />

<div class="row">
	<div class="col-md-12">
        <div class="card-box" id="searchResults" style="display: none"></div>
	</div>
</div>

<script>
	function updateTextInput(val) {
		document.getElementById('textInput').value=val; // Maybe change to "none" if val is 0?
	}

	function placeHolderFunction() {
		alert("THing running");
	}

	// progressTimeout tracks whether a timeout function is in progress.
	var progressTimeout = null;

	$(document).ready(function() {
		$("#word1").on("keydown paste", function() {
			if (progressTimeout) {
				clearTimeout(progressTimeout);
			}
			progressTimeout = setTimeout(placeHolderFunction, 500);
		});

		/* save setTimeout to a variable outside of this function. Use that to
		cancel previously called function. Google the hell out of this, find
		examples. Something else to search for: look at things like search completion
		or search suggestions. Loads suggested past searches, for example. */
	});


</script>

<style>

</style>

{% endblock %}
